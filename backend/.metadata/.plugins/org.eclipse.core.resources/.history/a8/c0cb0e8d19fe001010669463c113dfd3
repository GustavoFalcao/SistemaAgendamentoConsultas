import java.util.ArrayList;

public class Sistema {

    public static ArrayList<Paciente> pacientes = new ArrayList<>();
    public static ArrayList<Medico> medicos = new ArrayList<>();
    public static ArrayList<Consulta> consultas = new ArrayList<>();

    // ===== PACIENTE =====
    public static void cadastrarPaciente(Paciente p, Usuario u) {
        pacientes.add(p);
        Log.registrar(u.getUsername(), "Cadastro de paciente: " + p.getNome());
    }

    public static void listarPacientes() {
        for (int i = 0; i < pacientes.size(); i++) {
            System.out.println(i + " - " + pacientes.get(i));
        }
    }

    public static void removerPaciente(int index, Usuario u) {
        if (!u.isAdmin()) {
            System.out.println("Apenas administradores.");
            return;
        }
        Paciente p = pacientes.remove(index);
        Log.registrar(u.getUsername(), "Remoção de paciente: " + p.getNome());
    }

    // ===== MÉDICO =====
    public static void cadastrarMedico(Medico m, Usuario u) {
        medicos.add(m);
        Log.registrar(u.getUsername(), "Cadastro de médico: " + m.getNome());
    }

    // ===== CONSULTA =====
    public static void agendarConsulta(Consulta c, Usuario u) {
        consultas.add(c);
        Log.registrar(u.getUsername(), "Consulta agendada");
    }

    public static void cancelarConsulta(int index, Usuario u) {
        if (!u.isAdmin()) {
            System.out.println("Apenas administradores.");
            return;
        }
        consultas.get(index).cancelar();
        Log.registrar(u.getUsername(), "Consulta cancelada");
    }
}
